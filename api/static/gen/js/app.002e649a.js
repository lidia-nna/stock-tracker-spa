(function(e){function t(t){for(var a,n,i=t[0],c=t[1],l=t[2],u=0,d=[];u<i.length;u++)n=i[u],Object.prototype.hasOwnProperty.call(o,n)&&o[n]&&d.push(o[n][0]),o[n]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);m&&m(t);while(d.length)d.shift()();return s.push.apply(s,l||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],a=!0,n=1;n<r.length;n++){var i=r[n];0!==o[i]&&(a=!1)}a&&(s.splice(t--,1),e=c(c.s=r[0]))}return e}var a={},n={app:0},o={app:0},s=[];function i(e){return c.p+"js/"+({}[e]||e)+"."+{"chunk-2d21e30b":"1be6d085","chunk-3c6b6a5e":"52b963e2"}[e]+".js"}function c(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,c),r.l=!0,r.exports}c.e=function(e){var t=[],r={"chunk-3c6b6a5e":1};n[e]?t.push(n[e]):0!==n[e]&&r[e]&&t.push(n[e]=new Promise((function(t,r){for(var a="css/"+({}[e]||e)+"."+{"chunk-2d21e30b":"31d6cfe0","chunk-3c6b6a5e":"67270a33"}[e]+".css",o=c.p+a,s=document.getElementsByTagName("link"),i=0;i<s.length;i++){var l=s[i],u=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(u===a||u===o))return t()}var d=document.getElementsByTagName("style");for(i=0;i<d.length;i++){l=d[i],u=l.getAttribute("data-href");if(u===a||u===o)return t()}var m=document.createElement("link");m.rel="stylesheet",m.type="text/css",m.onload=t,m.onerror=function(t){var a=t&&t.target&&t.target.src||o,s=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=a,delete n[e],m.parentNode.removeChild(m),r(s)},m.href=o;var f=document.getElementsByTagName("head")[0];f.appendChild(m)})).then((function(){n[e]=0})));var a=o[e];if(0!==a)if(a)t.push(a[2]);else{var s=new Promise((function(t,r){a=o[e]=[t,r]}));t.push(a[2]=s);var l,u=document.createElement("script");u.charset="utf-8",u.timeout=120,c.nc&&u.setAttribute("nonce",c.nc),u.src=i(e);var d=new Error;l=function(t){u.onerror=u.onload=null,clearTimeout(m);var r=o[e];if(0!==r){if(r){var a=t&&("load"===t.type?"missing":t.type),n=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+a+": "+n+")",d.name="ChunkLoadError",d.type=a,d.request=n,r[1](d)}o[e]=void 0}};var m=setTimeout((function(){l({type:"timeout",target:u})}),12e4);u.onerror=u.onload=l,document.head.appendChild(u)}return Promise.all(t)},c.m=e,c.c=a,c.d=function(e,t,r){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(c.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)c.d(r,a,function(t){return e[t]}.bind(null,a));return r},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/api/gen/",c.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=t,l=l.slice();for(var d=0;d<l.length;d++)t(l[d]);var m=u;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"01ef":function(e,t,r){"use strict";r("3ce8")},"030f":function(e,t,r){},1:function(e,t){},"1a5d":function(e,t,r){var a={"./History.vue":["e4bb"],"./Home.vue":["bb51","chunk-3c6b6a5e"],"./Index.vue":["d504","chunk-2d21e30b"],"./MyStocks.vue":["91cf"],"./Today.vue":["df35"]};function n(e){if(!r.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],n=t[0];return Promise.all(t.slice(1).map(r.e)).then((function(){return r(n)}))}n.keys=function(){return Object.keys(a)},n.id="1a5d",e.exports=n},"349f":function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-form",{ref:"form",staticClass:"rounded bccolor",attrs:{"lazy-validation":""},on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[e.error?r("v-card-text",{staticClass:"pink--text"},[e._v(e._s(e.authStatus))]):e._e(),e.info?r("v-card-text",{staticClass:"cyan--text"},[e._v(e._s(e.authStatus))]):e._e(),e.resendConfirmation?r("v-btn",{staticClass:"mr-4",attrs:{color:"#00bcd4"},on:{click:e.resendToken}},[e._v("Re-send token")]):e._e(),r("v-card",{staticClass:"elevation-10 mb-2 pt-3 bccolor"},[r("br"),r("v-row",{staticClass:"d-flex justify-center"},[r("v-col",{attrs:{cols:"8",sm:"7",md:"7",lg:"7","align-content":"center"}},[r("p",{staticClass:"text-center text-h5"},[e._v(" Sign up ")]),r("v-text-field",{attrs:{counter:10,rules:e.nameRules,label:"Username"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),r("v-text-field",{attrs:{rules:e.emailRules,label:"E-mail",required:""},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),r("v-text-field",{attrs:{type:e.show?"text":"password","append-icon":e.show?"mdi-eye":"mdi-eye-off",rules:e.passwordRules,counter:"",label:"Password",required:""},on:{"click:append":function(t){e.show=!e.show}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),r("v-text-field",{attrs:{rules:e.confpasswordRules,label:"Confirm password",required:"",counter:"",type:e.show?"text":"password","append-icon":e.show?"mdi-eye":"mdi-eye-off"},on:{"click:append":function(t){e.show=!e.show}},model:{value:e.confpassword,callback:function(t){e.confpassword=t},expression:"confpassword"}}),r("v-checkbox",{attrs:{rules:[function(e){return!!e||"You must agree to continue!"}],label:"Do you agree?",required:""},model:{value:e.checkbox,callback:function(t){e.checkbox=t},expression:"checkbox"}})],1)],1),r("v-row",{staticClass:"d-flex justify-center"},[r("v-btn",{staticClass:"mr-4",attrs:{disabled:!e.valid,color:"#00bcd4",type:"submit"}},[e._v(" Sumbit ")]),r("v-btn",{attrs:{color:"#00bcd4"},on:{click:e.reset}},[e._v(" Clear ")])],1),r("br"),r("br")],1)],1)},n=[],o=(r("96cf"),r("1da1")),s=r("5530"),i=r("2f62"),c={name:"RegisterForm",data:function(){return{valid:!0,show:!1,error:!1,info:!1,resendConfirmation:!1,username:"",nameRules:[function(e){return!!e||"Name is required"},function(e){return e&&e.length<=10||"Name must be less than 10 characters"}],email:"",emailRules:[function(e){return!!e||"E-mail is required"},function(e){return/.+@.+\..+/.test(e)||"E-mail must be valid"}],password:"",passwordRules:[function(e){return!!e||"Password is required"},function(e){return e.length>=8||"Password must be at least 8 characters"}],confpassword:"",checkbox:!1}},computed:Object(s["a"])(Object(s["a"])({},Object(i["e"])({authStatus:function(e){return e.auth.authStatus}})),{},{confpasswordRules:function(){return[this.confpassword==this.password&&""!=this.confpassword||"Password must match"]},regForm:function(){var e=new FormData;return e.append("username",this.username),e.append("email",this.email),e.append("password",this.password),e}}),methods:Object(s["a"])(Object(s["a"])(Object(s["a"])({},Object(i["d"])(["setStatus"])),Object(i["b"])(["login","register","getConfToken"])),{},{validate:function(){this.$refs.form.validate()},reset:function(){this.$refs.form.reset(),this.setStatus("")},resetValidation:function(){this.$refs.form.resetValidation()},onSubmit:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("VALIDATE",e.validate),e.validate(),t.prev=2,t.next=5,e.register(e.regForm);case 5:t.next=12;break;case 7:t.prev=7,t.t0=t["catch"](2),console.error("Sign Up",t.t0),e.error=!0,403===t.t0.response.status&&(e.resendConfirmation=!0);case 12:case"end":return t.stop()}}),t,null,[[2,7]])})))()},resendToken:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.resendConfirmation=!e.resendConfirmation,console.log("EMAIL",e.email),t.next=5,e.getConfToken(JSON.stringify({email:e.email}));case 5:r=t.sent,e.error=!1,e.info=!0,e.setStatus(r.data),e.$refs.form.reset(),t.next=16;break;case 12:t.prev=12,t.t0=t["catch"](0),console.error("Resend Token",t.t0),e.error=!0;case 16:case"end":return t.stop()}}),t,null,[[0,12]])})))()}})},l=c,u=(r("dd0f"),r("2877")),d=r("6544"),m=r.n(d),f=r("8336"),p=r("b0af"),h=r("99d9"),v=r("ac7c"),b=r("62ad"),g=r("4bd4"),k=r("0fd9"),y=r("8654"),x=Object(u["a"])(l,a,n,!1,null,"212b0a3c",null);t["a"]=x.exports;m()(x,{VBtn:f["a"],VCard:p["a"],VCardText:h["b"],VCheckbox:v["a"],VCol:b["a"],VForm:g["a"],VRow:k["a"],VTextField:y["a"]})},"37ee":function(e,t,r){},"3ce8":function(e,t,r){},4360:function(e,t,r){"use strict";var a=r("2b0e"),n=r("2f62"),o=r("0e44"),s=(r("c975"),r("d81d"),r("d3b7"),r("6062"),r("3ca3"),r("ddb0"),r("53ca")),i=(r("96cf"),r("1da1")),c=r("2909"),l=(r("99af"),r("5530")),u=r("bc3a"),d=r.n(u),m=r("db49"),f=d.a.create({baseURL:"".concat(m["a"].dev.apiURL,"/"),timeout:2e3}),p=f;f.interceptors.request.use((function(e){return console.log("".concat(e.method.toUpperCase()," Request made to ").concat(e.url," with data:"),e.data),e.headers["Authorization"]="Bearer ".concat(localStorage.getItem("access_token")),e}),(function(e){return console.log(e),e})),f.interceptors.response.use((function(e){var t=e.status,r=e.data,a=e.config;return console.log("Response from ".concat(a.url,":"),Object(l["a"])({code:t},r)),e}),function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.response){e.next=22;break}r=t.response.status,e.t0=r,e.next=401===e.t0?5:19;break;case 5:return e.prev=5,e.next=8,U.dispatch("refreshToken");case 8:return a=t.config,e.next=11,f({method:a.method,url:a.url,data:a.data});case 11:return e.abrupt("return",e.sent);case 14:e.prev=14,e.t1=e["catch"](5),console.log(e.t1),401===e.t1.response.status?U.dispatch("logout"):U.commit("setStatus",t.response);case 18:return e.abrupt("break",20);case 19:return e.abrupt("return",Promise.reject(t));case 20:e.next=27;break;case 22:if(!t.request){e.next=26;break}return e.abrupt("return",Promise.reject(t));case 26:return e.abrupt("return",Promise.reject(t));case 27:case"end":return e.stop()}}),e,null,[[5,14]])})));return function(t){return e.apply(this,arguments)}}());var h={dialog:!1,dialogDelete:!1,myStocks:[],headers:[{text:"Date added",value:"timestamp",align:"start",width:"15%"},{text:"Name",value:"name",align:"start"},{text:"Symbol (yahoo)",value:"ticker"},{text:"Price per share (p£)",value:"share_price"},{text:"Number of shares",value:"share_count"},{text:"Lower threshold (%)",value:"lower_threshold"},{text:"Upper threshold (%)",value:"upper_threshold"},{text:"Actions",value:"actions",sortable:!1}],editedIndex:-1,editedItem:{id:null,timestamp:"",name:"",ticker:"",share_price:0,share_count:0,lower_threshold:0,upper_threshold:0},defaultItem:{id:null,timestamp:"",name:"",ticker:"",share_price:0,share_count:0,lower_threshold:0,upper_threshold:0}},v={formTitle:function(e){return-1===e.editedIndex?"New Stock":"Edit Stock"},EmptyStocks:function(e){return 0==e.myStocks.length},symbols:function(e){return console.log("Inside symbol getter:",e.myStocks),Object(c["a"])(new Set(e.myStocks.map((function(e){return e.ticker}))))}},b={getMyStocks:function(e){return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,t.prev=1,t.next=4,p.get("/tickers");case 4:return a=t.sent,r("setMyStocks",a.data),t.abrupt("return","Success");case 9:throw t.prev=9,t.t0=t["catch"](1),console.log(t.t0),t.t0;case 13:case"end":return t.stop()}}),t,null,[[1,9]])})))()},putMyStocks:function(e){return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.state,t.prev=1,t.next=4,p.put("ticker",r.editedItem);case 4:return t.abrupt("return","Success");case 7:throw t.prev=7,t.t0=t["catch"](1),console.error("Unable to retrieve tickers data"),t.t0;case 11:case"end":return t.stop()}}),t,null,[[1,7]])})))()},postMyStocks:function(e){return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.state,t.prev=1,t.next=4,p.post("/ticker",r.editedItem,{headers:{"Content-Type":"application/json"}});case 4:return t.abrupt("return","Success");case 7:throw t.prev=7,t.t0=t["catch"](1),console.error("Unable to retrieve tickers data"),t.t0;case 11:case"end":return t.stop()}}),t,null,[[1,7]])})))()},completeMyStockUpdate:function(e){return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e.state,a=e.dispatch,n=null,t.prev=2,!(r.editedIndex>-1)){t.next=9;break}return t.next=6,a("putMyStocks");case 6:n=t.sent,t.next=12;break;case 9:return t.next=11,a("postMyStocks");case 11:n=t.sent;case 12:t.next=18;break;case 14:t.prev=14,t.t0=t["catch"](2),console.error("Failure!"),console.error(t.t0);case 18:null!=n&&a("getMyStocks");case 19:case"end":return t.stop()}}),t,null,[[2,14]])})))()},deleteMyStocks:function(e){return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.state,t.prev=1,t.next=4,p.delete("/ticker?id=".concat(r.editedItem.id));case 4:return t.abrupt("return","Success");case 7:throw t.prev=7,t.t0=t["catch"](1),console.error("Removal unsuccessful!"),t.t0;case 11:case"end":return t.stop()}}),t,null,[[1,7]])})))()},editItem:function(e,t){var r=e.commit;r("setEditedIndex",t),r("setEditedItem",t),r("setDialog",!0)},deleteItem:function(e,t){var r=e.commit;r("setEditedIndex",t),r("setEditedItem",t),r("setDialogDelete",!0)},onUpdate:function(e){var t=e.commit,r=e.state;t("setEditedItem",r.defaultItem),t("setEditedIndex",-1)},update:function(e){var t=e.commit,r=e.state;t("updateMyStocks",r)},deleteItemConfirm1:function(e){return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.dispatch,t.prev=1,t.next=4,r("deleteMyStocks");case 4:a=t.sent,t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](1),console.error(t.t0);case 10:"Success"==a&&(console.log("ticker deleted response",a),r("getMyStocks"));case 11:case"end":return t.stop()}}),t,null,[[1,7]])})))()}},g={setEditedIndex:function(e,t){"object"===Object(s["a"])(t)?e.editedIndex=e.myStocks.indexOf(t):"number"===typeof t&&(e.editedIndex=t)},setEditedItem:function(e,t){e.editedItem=Object.assign({},t)},setDialog:function(e,t){e.dialog=t},setDialogDelete:function(e,t){e.dialogDelete=t},setMyStocks:function(e,t){e.myStocks=t}},k={state:h,getters:v,actions:b,mutations:g},y=(r("7db0"),r("4160"),r("159b"),{tickers:[],allTimeSeries:[]}),x={headers:function(){var e=[{text:"Last Update",value:"date",width:"10%"},{text:"Company",value:"name"},{text:"Symbol (yahoo)",value:"ticker"},{text:"Stock Nr",value:"stock_nr",widh:"1%"},{text:"Live (p£)",value:"live"},{text:"Open (p£)",value:"open"},{text:"Low (p£)",value:"low"},{text:"High (p£)",value:"high"},{text:"Lower lim (p£)",value:"lower_threshold"},{text:"Upper lim (p£)",value:"upper_threshold"},{text:"Gain (%)",value:"margin"},{text:"Share count",value:"share_count",widh:"3%"},{text:"Total earnings (£)",value:"total_earnings"},{text:"Reset?",value:"reset_threshold"}];return e.map((function(e){return e["align"]="center",e}))},drawTickers:function(e){console.log("drawTickers!");var t=e.tickers.map((function(e){return Object.assign({id:e.id,symbol:e.ticker,stock_nr:e.stock_nr,bought:e.share_price,upperLimit:e.upper_threshold,lowerLimit:e.lower_threshold})}));return console.log("Tickers",t),t},allData:function(e,t){var r=t.drawTickers.map((function(t){var r=e.allTimeSeries.find((function(e){return e.symbol===t.symbol}));return Object.assign(t,r)}));console.log("All_before",r);var a=JSON.parse(JSON.stringify(r));return a.map((function(e){return 1!==e.stock_nr&&(e.symbol="".concat(e.symbol," (").concat(e.stock_nr,")")),e})),a}},w={getTickers:function(e){var t=e.commit;return p.get("/summary").then((function(e){return t("setTickers",e.data),console.log("GETTickers: data",e),"Success"})).catch((function(e){throw console.error(e),e}))},getAllTimeSeries:function(e){var t=e.commit,r=e.state,a=e.rootGetters,n=[],o={},s=a.symbols.map((function(e){return p.get("/charts/daily?ticker="+e)}));return Promise.all(s).then((function(e){return e.forEach((function(e){console.log(e);var t=Object.assign({symbol:e.data.symbol,time:e.data.Date,data:e.data.Close});console.log("ts",t),n.push(t),r.tickers.forEach((function(t){t.ticker==e.data.symbol&&(console.log("last update",e.data.last_update),t.date=e.data.last_update)}))})),console.log("values",o),t("setAllTimeSeries",n),"Success"}))}},_={setTickers:function(e,t){e.tickers=t},updateTickers:function(e,t,r){console.log("tickers",e.tickers),e.tickers.forEach((function(e){e[t]=r[e.ticker]}))},setAllTimeSeries:function(e,t){e.allTimeSeries=t}},S={state:y,getters:x,actions:w,mutations:_},C=r("a18c"),O=r("1232"),j={authStatus:"",accessToken:"",refreshToken:""},T={setStatus:function(e,t){e.authStatus=t},updateAccessToken:function(e,t){p.defaults.headers.common["Authorization"]="Bearer ".concat(t),localStorage.setItem("access_token",t),e.accessToken=t},updateRefreshToken:function(e,t){localStorage.setItem("refresh_token",t),e.refreshToken=t}},R={isLoggedIn:function(e){return"success"===e.authStatus}},I={register:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=e.commit,r.prev=1,console.log("details",t),r.next=5,d.a.post(m["a"].dev.apiURL+"/register",t,{headers:{"Content-Type":"multipart/form-data"}});case 5:C["a"].push("/login"),r.next=12;break;case 8:throw r.prev=8,r.t0=r["catch"](1),a("setStatus",r.t0.response.status+" "+r.t0.response.statusText+": "+r.t0.response.data),r.t0;case 12:case"end":return r.stop()}}),r,null,[[1,8]])})))()},login:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function r(){var a,n,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=e.commit,r.prev=1,r.next=4,d.a.post(m["a"].dev.apiURL+"/auth",t);case 4:return n=r.sent,r.next=7,n.data;case 7:o=r.sent,a("setStatus","success"),a("updateAccessToken",o.access_token),a("updateRefreshToken",o.refresh_token),C["a"].push("/user"),r.next=18;break;case 14:throw r.prev=14,r.t0=r["catch"](1),a("setStatus",r.t0.response.status+" "+r.t0.response.statusText+": "+r.t0.response.data),r.t0;case 18:case"end":return r.stop()}}),r,null,[[1,14]])})))()},getConfToken:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=e.commit,r.prev=1,r.abrupt("return",d.a.post(m["a"].dev.apiURL+"/unconfirmed",t,{headers:{"Content-Type":"application/json"}}));case 5:throw r.prev=5,r.t0=r["catch"](1),a("setStatus",r.t0.response.status+" "+r.t0.response.statusText+": "+r.t0.response.data),r.t0;case 9:case"end":return r.stop()}}),r,null,[[1,5]])})))()},checkAccessTokenExpiry:function(e){var t=e.state,r=e.getters,a=e.dispatch;if(r.isLoggedIn){console.log("access!"),console.log("state.accessToken",t.accessToken);var n=Object(O["a"])(t.accessToken),o=Date.now()/1e3,s=n.exp-o<30;if(s){console.log("refresh!");var i=a("refreshToken");i.then((function(e){a("resetAccessToken",e.data.access_token),console.log("Response",e)}))}}},refreshToken:function(e){return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,a=e.dispatch,n=localStorage.getItem("refresh_token"),t.prev=2,console.log("Completed refreshToken"),t.next=6,d.a.get(m["a"].dev.apiURL+"/token/refresh",{headers:{Authorization:"Bearer ".concat(n)}});case 6:o=t.sent,r("updateAccessToken",o.data.access_token),r("setStatus","success"),t.next=15;break;case 11:t.prev=11,t.t0=t["catch"](2),console.log(t.t0),401===t.t0.response.status?a("logout"):(r("setStatus",t.t0.response),console.error(t.t0));case 15:case"end":return t.stop()}}),t,null,[[2,11]])})))()},resetAccessToken:function(e,t){var r=e.commit;r("setStatus","success"),r("updateAccessToken",t)},logout:function(e){var t=e.commit;delete p.defaults.headers.common["Authorization"],t("setStatus",""),t("updateAccessToken",""),t("updateRefreshToken",""),location.reload(),C["a"].push({name:"auth-login"})},isLoggedIn:function(e){var t=e.getters,r=e.dispatch,a=localStorage.getItem("refresh_token");if(a){if(!t.isLoggedIn)return!1;r("checkAccessTokenExpiry").then((function(){return t.isLoggedIn}))}}},V={state:j,getters:R,actions:I,mutations:T},L=(r("b64b"),function(e,t){e.x=t.data.Date,e.close=t.data.Close,e.open=t.data.Open,e.low=t.data.Low,e.high=t.data.High}),E=function(e,t){return d.a.get("".concat(e,"?ticker=").concat(t))},D=function(e){return E("".concat(m["a"].dev.apiURL,"/charts/week"),e)},$=function(e){return E("".concat(m["a"].dev.apiURL,"/charts/alltime"),e)},F=function(e,t){return new Promise((function(r,a){var n=d.a.get("".concat(m["a"].dev.apiURL,"/charts/alltime?ticker=").concat(e)).then((function(e){return t.time=e.data.Date,t.data=e.data.Close,"Success"})).catch((function(e){console.error(e)}));n.then((function(e){return e?r("Success"):a("Error")}))}))},A={lastWeek:{x:[],open:[],close:[],high:[],low:[]},lastYear:{x:[],open:[],close:[],high:[],low:[]},ftse:{time:[],data:[]},ftmc:{time:[],data:[]},ftlc:{time:[],data:[]},ftai:{time:[],data:[]},ftsSymbols:["^FTSE","^FTMC","^FTLC","^FTAI"]},M={DataLY:function(e){return e.lastYear.close},isLastWeekEmpty:function(e){return 0===Object.keys(e.lastWeek.x).length},isLastYearEmpty:function(e){return 0===Object.keys(e.lastYear.x).length},isFTEmpty:function(e){return 0===Object.keys(e.ftai.time).length}},P={setLastWeek:function(e,t){L(e.lastWeek,t)},setLastYear:function(e,t){L(e.lastYear,t)}},q={lastWeeksTrace:function(e,t){var r=e.commit;return D(t).then((function(e){r("setLastWeek",e)})).catch((function(e){console.log(e)}))},lastYearsTrace:function(e,t){var r=e.commit;return $(t).then((function(e){r("setLastYear",e)}))},lastYearsFTS:function(e){var t=e.state,r=[F("^FTSE",t.ftse),F("^FTMC",t.ftmc),F("^FTLC",t.ftlc),F("^FTAI",t.ftai)];return Promise.all(r).then((function(e){console.log("responses",e)})).catch((function(e){return console.log(e.error)}))}},N={state:A,getters:M,mutations:P,actions:q};a["a"].use(n["a"]);var U=t["a"]=new n["a"].Store({modules:{stocks:k,today:S,auth:V,history:N},plugins:[Object(o["a"])({key:"vuex",reducer:function(e){return""===e.auth.authStatus?{}:e}})]})},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var a=r("2b0e"),n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",{attrs:{id:"app"}},[r("Nav"),r("v-main",[r("router-view")],1)],1)},o=[],s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-navigation-drawer",{staticClass:"rounded-lg",attrs:{"overlay-color":"#00bcd4",app:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[a("v-list",{attrs:{rounded:""}},[a("v-list-item",[a("v-img",{attrs:{src:r("b4fa"),width:"50%"}})],1),a("v-divider",{attrs:{dark:""}}),e.isLoggedIn?a("div",[a("v-list-group",{attrs:{value:!0,"no-action":"","prepend-icon":"mdi-chart-areaspline-variant"},scopedSlots:e._u([{key:"activator",fn:function(){return[a("v-list-item-content",[a("v-list-item-title",[e._v("Dashboard")])],1)]},proxy:!0}],null,!1,1870259532)},e._l(e.options,(function(t,r){return a("v-list-item",{key:r,attrs:{to:t.link,link:""}},[a("v-list-item-title",{domProps:{textContent:e._s(t.title)}}),a("v-list-item-icon",[a("v-icon",{domProps:{textContent:e._s(t.icon)}})],1)],1)})),1),a("v-divider",{attrs:{dark:""}}),a("v-list-group",{attrs:{"no-action":"","prepend-icon":"mdi-cog"},scopedSlots:e._u([{key:"activator",fn:function(){return[a("v-list-item-content",[a("v-list-item-title",[e._v("Settings")])],1)]},proxy:!0}],null,!1,991101773)},[e._l(e.config,(function(t,r){return a("v-list-item",{key:r,attrs:{to:t.link,link:""}},[a("v-list-item-title",{domProps:{textContent:e._s(t.title)}}),a("v-list-item-icon",[a("v-icon",{domProps:{textContent:e._s(t.icon)}})],1)],1)})),a("v-list-group",{attrs:{value:!0,"no-action":"","sub-group":""},scopedSlots:e._u([{key:"activator",fn:function(){return[a("v-list-item-content",[a("v-list-item-title",[e._v("My account")])],1)]},proxy:!0}],null,!1,2549835549)},[e._l(e.account,(function(t,r){return a("v-list-item",{key:r,attrs:{to:t.link,link:""}},[a("v-list-item-title",{domProps:{textContent:e._s(t.title)}}),a("v-list-item-icon",[a("v-icon",{domProps:{textContent:e._s(t.icon)}})],1)],1)})),a("v-list-item",{on:{click:e.logout}},[a("v-list-item-title",{domProps:{textContent:e._s("Log out")}}),a("v-list-item-icon",[a("v-icon",{domProps:{textContent:e._s("mdi-logout")}})],1)],1)],2)],2)],1):a("div",[a("v-list-item",{attrs:{color:"#00bcd4",to:{name:"auth-login"},link:""}},[a("v-list-item-title",{staticClass:"title"},[e._v("Sign in")])],1),a("v-list-item",{attrs:{color:"#00bcd4",to:{name:"auth-register"},link:""}},[a("v-list-item-title",{staticClass:"title"},[e._v("Sign up")])],1)],1)],1)],1),e.drawer?e._e():a("v-app-bar",{attrs:{rounded:"",dark:"",app:""}},[a("v-app-bar-nav-icon",{on:{click:function(t){e.drawer=!e.drawer}}}),a("v-spacer"),e.drawer?e._e():a("v-toolbar-title",[e._v("StockTracker")])],1)],1)},i=[],c=r("5530"),l=r("2f62"),u={data:function(){return{drawer:null,options:[{title:"Live feed",icon:"mdi-cast",link:"live"},{title:"Historical view",icon:"mdi-history",link:"history"}],config:[{title:"My Stocks",icon:"mdi-trending-up",link:"mystocks"}],account:[{title:"Password",icon:"mdi-lock-reset",link:"changepsswd"}]}},computed:Object(c["a"])({},Object(l["c"])({isLoggedIn:"isLoggedIn"})),methods:Object(c["a"])({},Object(l["b"])(["logout"]))},d=u,m=r("2877"),f=r("6544"),p=r.n(f),h=r("40dc"),v=r("5bc1"),b=r("ce7e"),g=r("132d"),k=r("adda"),y=r("8860"),x=r("56b0"),w=r("da13"),_=r("5d23"),S=r("34c3"),C=r("f774"),O=r("2fa4"),j=r("2a7f"),T=Object(m["a"])(d,s,i,!1,null,null,null),R=T.exports;p()(T,{VAppBar:h["a"],VAppBarNavIcon:v["a"],VDivider:b["a"],VIcon:g["a"],VImg:k["a"],VList:y["a"],VListGroup:x["a"],VListItem:w["a"],VListItemContent:_["a"],VListItemIcon:S["a"],VListItemTitle:_["b"],VNavigationDrawer:C["a"],VSpacer:O["a"],VToolbarTitle:j["a"]});var I={components:{Nav:R}},V=I,L=(r("5c0b"),r("7496")),E=r("f6c4"),D=Object(m["a"])(V,n,o,!1,null,null,null),$=D.exports;p()(D,{VApp:L["a"],VMain:E["a"]});var F=r("4360"),A=r("f309");a["a"].use(A["a"]);var M=new A["a"]({theme:{dark:!0,themes:{dark:{background:"#1E1E1E",primary:"#00bcd4",secondary:"#9C27B0"}},options:{customProperties:!0}}}),P=r("a18c");a["a"].config.productionTip=!1,new a["a"]({store:F["a"],vuetify:M,router:P["a"],render:function(e){return e($)}}).$mount("#app")},"57be":function(e,t,r){},"5c0b":function(e,t,r){"use strict";r("9c0c")},"61b1":function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-form",{ref:"form",staticClass:"rounded",attrs:{"lazy-validation":""},on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[e.error?r("v-card-text",{staticClass:"pink--text"},[e._v(e._s(e.authStatus))]):e._e(),r("v-card",{staticClass:"bccolor elevation-10 mb-2 pt-5"},[r("br"),r("v-row",{staticClass:"d-flex justify-center"},[r("v-col",{attrs:{cols:"10",sm:"8",md:"6",lg:"8",xl:"8","align-content":"center"}},[r("p",{staticClass:"text-center text-h5"},[e._v(" Sign in ")]),r("v-text-field",{attrs:{counter:10,rules:e.nameRules,label:"Username",required:""},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),r("v-text-field",{attrs:{rules:e.passwordRules,label:"Password",type:e.show?"text":"password","append-icon":e.show?"mdi-eye":"mdi-eye-off",required:"",counter:""},on:{"click:append":function(t){e.show=!e.show}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)],1),r("v-row",{staticClass:"d-flex justify-center"},[r("v-btn",{staticClass:"mr-4",attrs:{disabled:!e.valid,color:"#00bcd4",type:"submit"}},[e._v(" Sumbit ")]),r("v-btn",{attrs:{color:"#00bcd4"},on:{click:e.reset}},[e._v(" Clear ")])],1),r("br"),r("br")],1)],1)},n=[],o=(r("96cf"),r("1da1")),s=r("5530"),i=r("2f62"),c={name:"LoginForm",data:function(){return{valid:!0,show:!1,username:"demo",error:!1,nameRules:[function(e){return!!e||"Name is required"},function(e){return e&&e.length<=10||"Name must be less than 10 characters"}],password:"11111111",passwordRules:[function(e){return!!e||"Password is required"},function(e){return e.length>=8||"Password must be at least 8 characters"}]}},computed:Object(s["a"])({},Object(i["e"])({authStatus:function(e){return e.auth.authStatus}})),methods:Object(s["a"])(Object(s["a"])(Object(s["a"])({},Object(i["d"])(["setStatus"])),Object(i["b"])(["login","register"])),{},{validate:function(){this.$refs.form.validate()},reset:function(){this.$refs.form.reset(),this.setStatus("")},resetValidation:function(){this.$refs.form.resetValidation()},onSubmit:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.validate(),r=new FormData,r.append("username",e.username),r.append("password",e.password),t.prev=4,t.next=7,e.login(r);case 7:t.next=13;break;case 9:t.prev=9,t.t0=t["catch"](4),console.error("Login",t.t0),e.error=!0;case 13:case"end":return t.stop()}}),t,null,[[4,9]])})))()}})},l=c,u=(r("afe9"),r("2877")),d=r("6544"),m=r.n(d),f=r("8336"),p=r("b0af"),h=r("99d9"),v=r("62ad"),b=r("4bd4"),g=r("0fd9"),k=r("8654"),y=Object(u["a"])(l,a,n,!1,null,"5be32dc6",null);t["a"]=y.exports;m()(y,{VBtn:f["a"],VCard:p["a"],VCardText:h["b"],VCol:v["a"],VForm:b["a"],VRow:g["a"],VTextField:k["a"]})},"765c":function(e,t,r){"use strict";r("030f")},"8f56":function(e,t,r){},"91cf":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",[r("v-row",[r("stock-list")],1)],1)},n=[],o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",[e.dataLoaded?r("v-row",{attrs:{justify:"center"}},[r("v-col",{staticClass:"col-10",attrs:{align:"center"}},[r("v-col",{attrs:{align:"end"}},[r("v-dialog",{attrs:{value:e.dialog,"max-width":"500px"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,n=t.attrs;return[r("v-btn",e._g(e._b({staticClass:"mb-2",attrs:{color:"primary",dark:""},on:{click:function(t){return e.setDialog(!e.dialog)}}},"v-btn",n,!1),a),[e._v(" New Stock ")])]}}],null,!1,388835822)},[r("v-form",{ref:"form",attrs:{"lazy-validation":""},on:{submit:function(t){return t.preventDefault(),e.save(t)}},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[r("v-card",{staticClass:"elevation-24"},[r("v-card-title",[r("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),r("v-card-text",[r("v-container",[r("v-row",[r("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[r("v-text-field",{attrs:{label:"Date added",value:""==e.editedItem.timestamp?e.editedItem.timestamp=e.getDate:e.editedItem.timestamp,readonly:""}})],1),r("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[r("v-text-field",{attrs:{"validate-on-blur":"",label:"Name",rules:e.nameRules},model:{value:e.editedItem.name,callback:function(t){e.$set(e.editedItem,"name",t)},expression:"editedItem.name"}})],1),r("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[r("v-text-field",{attrs:{label:"Symbol",rules:e.symbolRules,"validate-on-blur":""},model:{value:e.editedItem.ticker,callback:function(t){e.$set(e.editedItem,"ticker",t)},expression:"editedItem.ticker"}})],1),r("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[r("v-text-field",{attrs:{label:"Price per share (p£)",rules:e.priceRules,"validate-on-blur":""},model:{value:e.editedItem.share_price,callback:function(t){e.$set(e.editedItem,"share_price",t)},expression:"editedItem.share_price"}})],1),r("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[r("v-text-field",{attrs:{label:"Number of shares",rules:e.countRules,"validate-on-blur":""},model:{value:e.editedItem.share_count,callback:function(t){e.$set(e.editedItem,"share_count",t)},expression:"editedItem.share_count"}})],1),r("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[r("v-text-field",{attrs:{label:"Lower threshold (%)",rules:e.limitRules,"validate-on-blur":""},model:{value:e.editedItem.lower_threshold,callback:function(t){e.$set(e.editedItem,"lower_threshold",t)},expression:"editedItem.lower_threshold"}})],1),r("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[r("v-text-field",{attrs:{label:"Upper threshold (%)",rules:e.limitRules,"validate-on-blur":""},model:{value:e.editedItem.upper_threshold,callback:function(t){e.$set(e.editedItem,"upper_threshold",t)},expression:"editedItem.upper_threshold"}})],1)],1)],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.close}},[e._v(" Cancel ")]),r("v-btn",{attrs:{disabled:!e.valid,color:"blue darken-1",text:"",type:"submit"}},[e._v(" Save ")])],1)],1)],1)],1),r("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialogDelete,callback:function(t){e.dialogDelete=t},expression:"dialogDelete"}},[r("v-card",[r("v-card-title",{staticClass:"headline"},[e._v("Are you sure you want to delete this item?")]),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.closeDelete}},[e._v("Cancel")]),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.deleteItemConfirm}},[e._v("OK")]),r("v-spacer")],1)],1)],1)],1),r("v-col",[r("v-data-table",{staticClass:"elevation-15",attrs:{headers:e.headers,items:e.tickers,search:e.search,"sort-by":"name","font-size":"12"},scopedSlots:e._u([{key:"top",fn:function(){return[r("v-card-title",[e._v(" My Stocks "),r("v-spacer"),r("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),r("v-spacer")],1)]},proxy:!0},{key:"item.actions",fn:function(t){var a=t.item;return[r("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.editItem(a)}}},[e._v(" mdi-pencil ")]),r("v-icon",{attrs:{small:""},on:{click:function(t){return e.deleteItem(a)}}},[e._v(" mdi-delete ")])]}},{key:"no-data",fn:function(){return[r("v-btn",{attrs:{color:"primary"},on:{click:e.getMyStocks}},[e._v(" Reset ")])]},proxy:!0}],null,!1,39735817)})],1)],1)],1):e._e()],1)},s=[],i=(r("b0c0"),r("ac1f"),r("1276"),r("bf19"),r("96cf"),r("1da1")),c=r("5530"),l=r("2f62"),u={name:"StockList",data:function(){return{search:"",dataLoaded:!1,valid:!0,firstname:"",lastname:"",nameRules:[function(e){return!!e||"Name is required"},function(e){return e.length<=10||"Name must be less than 10 characters"}],email:"",symbolRules:[function(e){return!!e||"Symbol is required"},function(e){return/^[A-Z]+/.test(e)||"Symbol must be valid"}],priceRules:[function(e){return!!e||"Symbol is required"},function(e){return/^\d{1,10}\.\d{0,2}$/.test(e)||"Price must be a float number"}],limitRules:[function(e){return!!e||"Threshold is required"},function(e){return 100>=e>0||"Threshold must be (1-100) %"},function(e){return/^\d+$/.test(e)||"Threshold must be (1-100) %"}],countRules:[function(e){return!!e||"Number of shares is required"},function(e){return e>0||"Minimum one share is required"},function(e){return/^\d+$/.test(e)||"Integer expected"}]}},computed:Object(c["a"])(Object(c["a"])(Object(c["a"])({},Object(l["e"])({tickers:function(e){return e.stocks.myStocks},headers:function(e){return e.stocks.headers},dialog:function(e){return e.stocks.dialog},dialogDelete:function(e){return e.stocks.dialogDelete},editedItem:function(e){return e.stocks.editedItem},defaultItem:function(e){return e.stocks.defaultItem}})),Object(l["c"])(["formTitle","allData"])),{},{getDate:function(){return(new Date).toJSON().split("T")[0]},nameErrors:function(){var e=[];return this.$v.editedItem.name.$dirty?(console.log("HERE"),!this.$v.editedItem.name.required&&e.push("Name is required"),e):e},nameSuccess:function(){var e=[];return this.$v.editedItem.name.$dirty?(this.$v.editedItem.name.required&&e.push("Nice name!"),e):e}}),methods:Object(c["a"])(Object(c["a"])(Object(c["a"])({},Object(l["d"])(["setDialog","setDialogDelete"])),Object(l["b"])(["getMyStocks","editItem","deleteItem","deleteItemConfirm1","onUpdate","completeMyStockUpdate"])),{},{deleteItemConfirm:function(){this.deleteItemConfirm1(),this.closeDelete()},close:function(){var e=this;this.setDialog(!1),this.$nextTick((function(){e.onUpdate()}))},closeDelete:function(){var e=this;this.setDialogDelete(!1),this.$nextTick((function(){e.onUpdate()}))},save:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.validate(),t.next=3,e.completeMyStockUpdate();case 3:e.close();case 4:case"end":return t.stop()}}),t)})))()},validate:function(){this.$refs.form.validate()},reset:function(){this.$refs.form.reset()},resetValidation:function(){this.$refs.form.resetValidation()}}),watch:{dialog:function(e){e||this.close()},dialogDelete:function(e){e||this.closeDelete()}},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log("Mounted hook"),0!=e.tickers.length){t.next=7;break}return t.next=4,e.getMyStocks();case 4:e.dataLoaded=!0,t.next=8;break;case 7:e.dataLoaded=!0;case 8:case"end":return t.stop()}}),t)})))()}},d=u,m=r("2877"),f=r("6544"),p=r.n(f),h=r("8336"),v=r("b0af"),b=r("99d9"),g=r("62ad"),k=r("a523"),y=r("8fea"),x=r("169a"),w=r("4bd4"),_=r("132d"),S=r("0fd9"),C=r("2fa4"),O=r("8654"),j=Object(m["a"])(d,o,s,!1,null,null,null),T=j.exports;p()(j,{VBtn:h["a"],VCard:v["a"],VCardActions:b["a"],VCardText:b["b"],VCardTitle:b["c"],VCol:g["a"],VContainer:k["a"],VDataTable:y["a"],VDialog:x["a"],VForm:w["a"],VIcon:_["a"],VRow:S["a"],VSpacer:C["a"],VTextField:O["a"]});var R={components:{StockList:T}},I=R,V=Object(m["a"])(I,a,n,!1,null,null,null);t["default"]=V.exports;p()(V,{VContainer:k["a"],VRow:S["a"]})},"922a":function(e,t,r){"use strict";r("8f56")},"9c0c":function(e,t,r){},a18c:function(e,t,r){"use strict";(function(e){r("45fc"),r("d3b7");var a=r("2b0e"),n=r("8c4f"),o=r("df35"),s=r("e4bb"),i=r("91cf"),c=r("349f"),l=r("61b1"),u=r("4360");function d(e){return function(){return r("1a5d")("./".concat(e,".vue"))}}a["a"].use(n["a"]);var m=[{path:"/",component:d("Home"),meta:{authRequired:!1},children:[{path:"",name:"home-landing",redirect:{name:"auth-login"}},{path:"login",name:"auth-login",component:l["a"],meta:{authRequired:!1}},{path:"register",name:"auth-register",component:c["a"],meta:{authRequired:!1}}]},{path:"/user",component:d("Index"),meta:{authRequired:!0},children:[{path:"",name:"user-landing",meta:{authRequired:!0},redirect:{name:"live"}},{path:"live",name:"live",component:o["default"],meta:{authRequired:!0}},{path:"history",name:"past",component:s["default"],meta:{authRequired:!0}},{path:"mystocks",name:"stocks",component:i["default"],meta:{authRequired:!0}},{path:"changepsswd",name:"psswd",meta:{authRequired:!0}}]}],f=new n["a"]({mode:"history",base:e,routes:m});f.beforeEach((function(e,t,r){e.matched.some((function(e){return e.meta.authRequired}))?u["a"].getters.isLoggedIn?r():r({path:"/login"}):r()})),t["a"]=f}).call(this,"/")},a3fc:function(e,t,r){},afe9:function(e,t,r){"use strict";r("a3fc")},b4fa:function(e,t,r){e.exports=r.p+"img/StockTracker-logo.f201f35d.png"},c918:function(e,t,r){"use strict";r("db0a")},cbe2:function(e,t,r){},d536:function(e,t,r){"use strict";r("cbe2")},db0a:function(e,t,r){},db49:function(e,t,r){"use strict";var a={dev:{apiURL:"http://localhost:5000"},plt:{layout:{plot_bgcolor:"#121212",paper_bgcolor:"#121212",font:{color:"#BDBDBD"},xaxis:{gridcolor:"#424242"},yaxis:{gridcolor:"#424242"}},trace:{color:{primary:"#00bcd4",secondary:"#9c27b0",secondary_l1:"#aaffff",secondary_l2:"#d662e8",secondary_d1:"#ff9aff",secondary_d2:"#006d83",red:"#D81B60",green:"#4DD0E1"}},rangeslider:{buttons:{bgcolor:"#00bcd4",activecolor:"#8affff"}}}};t["a"]=a},dd0f:function(e,t,r){"use strict";r("37ee")},df35:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("chart-nav")],1)},n=[],o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.EmptyStocks?r("v-btn",{staticClass:"mt-10",attrs:{color:"#00bcd4"},on:{click:function(t){return e.$router.push("/user/mystocks")}}},[e._v(" Add your stocks ")]):r("v-card",{staticClass:"size",attrs:{loading:!e.dataLoaded}},[r("v-tabs",{attrs:{grow:"",primary:"true"},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[e._l(e.items,(function(t,a){return r("v-tab",{key:a},[e._v(" "+e._s(t.symbol)+" ")])})),e.dataLoaded?r("v-tabs-items",{attrs:{dark:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[r("v-container",[r("v-row",{staticClass:"d-flex"},[r("v-col",e._l(e.items,(function(e,t){return r("v-tab-item",{key:t,staticClass:"colors"},[r("daily-chart",{attrs:{item:e}})],1)})),1)],1)],1)],1):e._e()],2),r("v-row",{staticClass:"d-flex align-stretch",attrs:{justify:"center"}},[r("v-col",{attrs:{cols:"12",sm:"12",md:"12",lg:"11",xl:"11"}},[e.dataLoaded?r("summary-table",{attrs:{selectedRow:e.selectRow},on:{selectedId:e.onSelected}}):e._e()],1)],1)],1)},s=[],i=(r("4160"),r("159b"),r("96cf"),r("1da1")),c=r("5530"),l=r("2f62"),u=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-responsive",[e.item?r("v-card",e._b({attrs:{id:e.item.symbol,dark:""}},"v-card",e.$attrs,!1)):e._e()],1)},d=[],m=(r("cb29"),r("b0c0"),r("030a")),f=r.n(m),p={name:"Chart",props:{item:Object},data:function(){return{timeSeries:this.item}},methods:{plotChart:function(){console.log("timeSeries",this.timeSeries.time);var e={x:this.timeSeries.time,y:this.timeSeries.data,mode:"lines+markers",name:"live",yaxis:"y",marker:{symbol:"diamond",line:{width:.5,colorscale:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],color:.5},size:5},line:{color:"#4DD0E1",width:1}},t={x:this.timeSeries.time,y:Array(this.timeSeries.time.length).fill(this.timeSeries.lowerLimit),visible:"legendonly",mode:"lines",line:{dash:"dashdot",color:"#FF4081",width:1},name:"lower limit"},r={x:this.timeSeries.time,y:Array(this.timeSeries.time.length).fill(this.timeSeries.bought),mode:"lines",name:"bought",visible:"legendonly",line:{color:"#18FFFF",dash:"dashdot",width:1}},a=Object(c["a"])({},t);a.y=Array(this.timeSeries.time.length).fill(this.timeSeries.upperLimit),a.name="upper limit";var n=[e,r,a,t],o={title:this.timeSeries.symbol,yatimeis:{title:"Value [£p]"},plot_bgcolor:"#121212",paper_bgcolor:"#121212",font:{color:"#BDBDBD"},xaxis:{gridcolor:"#424242"},yaxis:{gridcolor:"#424242"}},s={responsive:!0};f.a.newPlot(this.timeSeries.symbol,n,o,s)}},mounted:function(){console.log("Created"),this.item&&this.plotChart()},watch:{timeSeries:function(){this.plotChart()}}},h=p,v=r("2877"),b=r("6544"),g=r.n(b),k=r("b0af"),y=r("6b53"),x=Object(v["a"])(h,u,d,!1,null,null,null),w=x.exports;g()(x,{VCard:k["a"],VResponsive:y["a"]});var _=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",[r("v-card",[r("v-card-title",[e._v(" Live Feed "),r("v-spacer"),r("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),r("v-spacer"),r("v-data-table",{staticClass:"elevation-5 row-pointer",attrs:{search:e.search,headers:e.headers,items:e.items,"item-key":"id","single-select":"","items-per-page":5,align:"center",pointer:""},on:{"click:row":e.rowClick},scopedSlots:e._u([{key:"headers",fn:function(e){e.$props;return[r("v-spacer")]}},{key:"item.live",fn:function(t){var a=t.item;return[r("v-chip",{attrs:{color:e.liveColor(a),dark:""}},[e._v(" "+e._s(a.live)+" ")])]}},{key:"item.margin",fn:function(t){var a=t.item;return[r("v-chip",{attrs:{color:e.marginColor(a),dark:""}},[e._v(" "+e._s(a.margin)+" ")])]}},{key:"item.reset_threshold",fn:function(t){var a=t.item;return[r("v-chip",{attrs:{color:e.resetThColor(a),dark:""}},[e._v(" "+e._s(a.reset_threshold)+" ")])]}}])})],1)],1)},S=[],C={name:"SummaryTable",props:["selectedRow"],data:function(){return{search:"",selection:!1}},methods:Object(c["a"])(Object(c["a"])({},Object(l["b"])(["getMyStocks"])),{},{liveColor:function(e){return e.live>e.open?"#00BCD4":"#D81B60"},marginColor:function(e){return e.margin>0?"#00BCD4":"#D81B60"},resetThColor:function(e){return 0==e.reset_threshold?"#00BCD4":"#D81B60"},rowClick:function(e,t){this.selection=!this.selection,t.isSelected=this.selection,t.select(this.selection),this.selection&&this.$emit("selectedId",e.id)},highlight:function(e){return e.row.index==this.selectedRow}}),computed:Object(c["a"])(Object(c["a"])({},Object(l["c"])(["headers"])),Object(l["e"])({items:function(e){return e.today.tickers}})),mounted:function(){var e=this;this.getMyStocks().then((function(){return e.dataLoaded=!0}))}},O=C,j=(r("c918"),r("99d9")),T=r("cc20"),R=r("a523"),I=r("8fea"),V=r("2fa4"),L=r("8654"),E=Object(v["a"])(O,_,S,!1,null,null,null),D=E.exports;g()(E,{VCard:k["a"],VCardTitle:j["c"],VChip:T["a"],VContainer:R["a"],VDataTable:I["a"],VSpacer:V["a"],VTextField:L["a"]});var $={components:{DailyChart:w,SummaryTable:D},name:"ChartNav",data:function(){return{tab:null,dataLoaded:!1,selectRow:this.tab}},computed:Object(c["a"])({},Object(l["c"])({symbols:"symbols",items:"allData",isLoggedIn:"isLoggedIn",EmptyStocks:"EmptyStocks"})),methods:Object(c["a"])(Object(c["a"])({},Object(l["b"])(["getMyStocks","getAllTimeSeries","getTickers"])),{},{initialize:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.getTickers();case 3:if(r=t.sent,"Success"!=r){t.next=9;break}return t.next=7,e.getAllTimeSeries();case 7:a=t.sent,"Success"==a&&(e.dataLoaded=!0);case 9:t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))()},onSelected:function(e){var t=this;console.log("OnSelectedEvent:",e),this.items.forEach((function(r,a){e==r.id&&(t.tab=a)}))}}),mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getMyStocks();case 2:if(r=t.sent,"Success"!=r||e.EmptyStocks){t.next=9;break}return console.log("Live feed: Initialize"),t.next=7,e.initialize();case 7:t.next=10;break;case 9:console.log("Couldn't get stocks");case 10:case"end":return t.stop()}}),t)})))()}},F=$,A=(r("fee0"),r("8336")),M=r("62ad"),P=r("0fd9"),q=r("71a3"),N=r("c671"),U=r("fe57"),B=r("aac8"),z=Object(v["a"])(F,o,s,!1,null,null,null),Y=z.exports;g()(z,{VBtn:A["a"],VCard:k["a"],VCol:M["a"],VContainer:R["a"],VRow:P["a"],VTab:q["a"],VTabItem:N["a"],VTabs:U["a"],VTabsItems:B["a"]});var W={components:{ChartNav:Y}},H=W,J=Object(v["a"])(H,a,n,!1,null,null,null);t["default"]=J.exports},e4bb:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("history-charts")],1)},n=[],o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",{attrs:{loading:!e.dataLoaded}},[r("v-tabs",{attrs:{grow:"",primary:"true"},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[e._l(e.symbols,(function(t,a){return r("v-tab",{key:a},[e._v(" "+e._s(t)+" ")])})),e.dataLoaded?r("v-tabs-items",{attrs:{dark:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[r("v-row",{staticClass:"d-flex"},[r("v-col",e._l(e.symbols,(function(e,t){return r("v-tab-item",{key:t,staticClass:"colors"},[r("v-row",{staticClass:"d-flex mx-auto"},[r("v-col",[r("weekly-chart",{attrs:{symbol:e}})],1),r("v-col",[r("yearly-chart",{attrs:{symbol:e}})],1)],1),r("v-row",{staticClass:"d-flex mx-auto"},[r("v-col",[r("FTChart",{attrs:{symbol:e}})],1)],1)],1)})),1)],1)],1):e._e()],2)],1)},s=[],i=(r("4160"),r("159b"),r("96cf"),r("1da1")),c=r("5530"),l=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",{attrs:{id:e.symbol+"_week"},on:{plotly_relayout:function(t){return e.console.log("Relayout")}}})},u=[],d=r("030a"),m=r.n(d),f=r("2f62"),p=r("db49"),h={name:"WeeklyChart",props:{symbol:{type:String}},data:function(){return{config:p["a"]}},computed:Object(c["a"])(Object(c["a"])({},Object(f["e"])({timeSeries:function(e){return e.history.lastWeek}})),Object(f["c"])(["isLastWeekEmpty"])),methods:Object(c["a"])({plotChart:function(){console.log("config",this.config),console.log(this.timeSeries.close);var e={x:this.timeSeries.x,close:this.timeSeries.close,open:this.timeSeries.open,low:this.timeSeries.low,high:this.timeSeries.high,increasing:{line:{color:this.config.plt.trace.color.green}},decreasing:{line:{color:this.config.plt.trace.color.red}},type:"ohlc",xaxis:"x",yaxis:"y"},t=[e],r={dragmode:"zoom",showlegend:!1,yatimeis:{title:"Value [£p]"},plot_bgcolor:this.config.plt.layout.plot_bgcolor,paper_bgcolor:this.config.plt.layout.paper_bgcolor,font:{color:this.config.plt.layout.font.color},xaxis:{autorange:!0,title:"Time",gridcolor:this.config.plt.layout.xaxis.gridcolor,rangebreaks:[{pattern:"hour",bounds:[17,8]},{pattern:"day of week",bounds:["sat","mon"]}],rangeselector:{x:0,y:1.2,xanchor:"left",font:{size:12,color:"black"},bgcolor:this.config.plt.rangeslider.buttons.bgcolor,activecolor:this.config.plt.rangeslider.buttons.activecolor,buttons:[{step:"day",stepmode:"backward",count:1,label:"1 DAY"},{step:"day",stepmode:"backward",count:3,label:"3 DAYS"},{step:"all",label:"1 WEEK"}]}},yaxis:{autorange:!0,title:"Share Value [£p]",gridcolor:this.config.plt.layout.yaxis.gridcolor}},a={responsive:!0};m.a.newPlot(this.symbol+"_week",t,r,a)}},Object(f["b"])(["lastWeeksTrace"])),mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("CandleChart: mounted, current route:",e.$route),t.next=3,e.lastWeeksTrace(e.symbol);case 3:e.plotChart();case 4:case"end":return t.stop()}}),t)})))()}},v=h,b=(r("d536"),r("2877")),g=r("6544"),k=r.n(g),y=r("b0af"),x=Object(b["a"])(v,l,u,!1,null,"96a47044",null),w=x.exports;k()(x,{VCard:y["a"]});var _=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",{attrs:{id:e.symbol+"_year"},on:{plotly_relayout:function(t){return e.console.log("Relayout")}}})},S=[],C={name:"YearlyChart",props:{symbol:{type:String}},data:function(){return{config:p["a"]}},computed:Object(c["a"])(Object(c["a"])({},Object(f["e"])({timeSeries:function(e){return e.history.lastYear}})),Object(f["c"])(["isLastYearEmpty"])),methods:Object(c["a"])({plotChart:function(){var e={x:this.timeSeries.x,close:this.timeSeries.close,open:this.timeSeries.open,low:this.timeSeries.low,high:this.timeSeries.high,increasing:{line:{color:this.config.plt.trace.color.green}},decreasing:{line:{color:this.config.plt.trace.color.red}},type:"ohlc",xaxis:"x",yaxis:"y"},t=[e],r={dragmode:"zoom",showlegend:!1,plot_bgcolor:this.config.plt.layout.plot_bgcolor,paper_bgcolor:this.config.plt.layout.paper_bgcolor,font:{color:this.config.plt.layout.font.color},xaxis:{gridcolor:this.config.plt.layout.xaxis.gridcolor,autorange:!0,title:"Time",rangeselector:{x:0,y:1.2,xanchor:"left",font:{size:12,color:"black"},bgcolor:this.config.plt.rangeslider.buttons.bgcolor,activecolor:this.config.plt.rangeslider.buttons.activecolor,buttons:[{step:"month",stepmode:"backward",count:1,label:"1 MONTH"},{step:"month",stepmode:"backward",count:6,label:"6 MONTHS"},{step:"all",label:"1 YEAR"}]}},yaxis:{gridcolor:this.config.plt.layout.yaxis.gridcolor,autorange:!0,title:"Share Value [£p]"}},a={responsive:!0};m.a.newPlot(this.symbol+"_year",t,r,a)}},Object(f["b"])(["lastYearsTrace"])),mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("YearlyChart: mounted, current route:",e.$route),t.next=3,e.lastYearsTrace(e.symbol);case 3:e.plotChart();case 4:case"end":return t.stop()}}),t)})))()}},O=C,j=(r("765c"),Object(b["a"])(O,_,S,!1,null,"336e0912",null)),T=j.exports;k()(j,{VCard:y["a"]});var R=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",{attrs:{id:e.symbol+"_trend"},on:{plotly_relayout:function(t){return e.console.log("Relayout")}}})},I=[],V=(r("d81d"),r("2909")),L={name:"FTChart",props:{symbol:{type:String}},data:function(){return{config:p["a"]}},computed:Object(c["a"])(Object(c["a"])({},Object(f["e"])({ftse:function(e){return e.history.ftse},ftmc:function(e){return e.history.ftmc},ftlc:function(e){return e.history.ftlc},ftai:function(e){return e.history.ftai}})),Object(f["c"])({stockSeries:"DataLY",isFTEmpty:"isFTEmpty"})),methods:Object(c["a"])({plotTrendChart:function(){var e={x:this.ftse.time,y:this.normalize(this.ftse.data),mode:"lines",name:"FT100",line:{color:this.config.plt.trace.color.secondary_d1}},t={x:this.ftmc.time,y:this.normalize(this.ftmc.data),mode:"lines",name:"FT250",line:{color:this.config.plt.trace.color.secondary_l2}},r={x:this.ftlc.time,y:this.normalize(this.ftlc.data),mode:"lines",name:"FT350",line:{color:this.config.plt.trace.color.secondary_l1}},a={x:this.ftlc.time,y:this.normalize(this.ftai.data),mode:"lines",name:"FTAI",line:{color:this.config.plt.trace.color.secondary}},n={x:this.ftlc.time,y:this.normalize(this.stockSeries),mode:"lines",name:this.symbol,line:{color:this.config.plt.trace.color.primary}},o=[e,t,r,a,n],s={title:"Financial Times Stock Indices",plot_bgcolor:this.config.plt.layout.plot_bgcolor,paper_bgcolor:this.config.plt.layout.paper_bgcolor,font:{color:this.config.plt.layout.font.color},xaxis:{gridcolor:this.config.plt.layout.xaxis.gridcolor,title:"Time"},yaxis:{title:"Value [£p]",gridcolor:this.config.plt.layout.yaxis.gridcolor}},i={responsive:!0};m.a.newPlot(this.symbol+"_trend",o,s,i)},normalize:function(e){var t=Math.max.apply(Math,Object(V["a"])(e)),r=Math.min.apply(Math,Object(V["a"])(e));return e.map((function(e){return(e-r)/(t-r)}))}},Object(f["b"])(["lastYearsFTS"])),mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log("YearlyChart: mounted, current route:",e.$route),!e.isFTEmpty){t.next=7;break}return t.next=4,e.lastYearsFTS();case 4:e.plotTrendChart(),t.next=8;break;case 7:e.plotTrendChart();case 8:case"end":return t.stop()}}),t)})))()}},E=L,D=(r("01ef"),Object(b["a"])(E,R,I,!1,null,"9bcbda5a",null)),$=D.exports;k()(D,{VCard:y["a"]});var F={components:{WeeklyChart:w,YearlyChart:T,FTChart:$},name:"HistoryChart",data:function(){return{tab:null,dataLoaded:!1,selectRow:this.tab}},computed:Object(c["a"])({},Object(f["c"])(["symbols","isLoggedIn"])),methods:Object(c["a"])(Object(c["a"])({},Object(f["b"])(["getMyStocks"])),{},{initialize:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!=e.symbols.length){t.next=7;break}return t.next=3,e.getMyStocks();case 3:r=t.sent,"Success"==r&&(e.dataLoaded=!0),t.next=8;break;case 7:e.dataLoaded=!0;case 8:case"end":return t.stop()}}),t)})))()},onSelected:function(e){var t=this;console.log("OnSelectedEvent:",e),this.symbols.forEach((function(r,a){e==r.id&&(t.tab=a)}))}}),mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.initialize();case 2:case"end":return t.stop()}}),t)})))()}},A=F,M=(r("922a"),r("62ad")),P=r("0fd9"),q=r("71a3"),N=r("c671"),U=r("fe57"),B=r("aac8"),z=Object(b["a"])(A,o,s,!1,null,null,null),Y=z.exports;k()(z,{VCard:y["a"],VCol:M["a"],VRow:P["a"],VTab:q["a"],VTabItem:N["a"],VTabs:U["a"],VTabsItems:B["a"]});var W={components:{HistoryCharts:Y}},H=W,J=Object(b["a"])(H,a,n,!1,null,null,null);t["default"]=J.exports},fee0:function(e,t,r){"use strict";r("57be")}});
//# sourceMappingURL=app.002e649a.js.map